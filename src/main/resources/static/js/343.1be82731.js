"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[343],{8343:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加岗位")]),t("el-dialog",{attrs:{title:"添加岗位",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"岗位编号","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"岗位名称","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.nameZh,callback:function(t){e.$set(e.form,"nameZh",t)},expression:"form.nameZh"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSumit}},[e._v("确 定")])],1)],1),t("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[t("el-row",[t("el-col",{attrs:{span:4}},[t("el-input",{attrs:{type:"text",size:"mini",placeholder:"根据用户昵称搜索"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1),t("el-col",{attrs:{span:1}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleSearch}},[e._v("搜索")])],1)],1)],1),t("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"rid",label:"岗位编号",width:"100"}}),t("el-table-column",{attrs:{prop:"name",label:"岗位编码"}}),t("el-table-column",{attrs:{prop:"nameZh",label:"岗位名称"}}),t("el-table-column",{attrs:{prop:"enabled",label:"岗位状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[!0===a.row.enabled?t("el-tag",{attrs:{type:"success"}},[e._v("正常")]):e._e(),!1===a.row.enabled?t("el-tag",{attrs:{type:"danger"}},[e._v("关闭")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.changeStatus(a.row)}},model:{value:a.row.enabled,callback:function(t){e.$set(a.row,"enabled",t)},expression:"scope.row.enabled"}})]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-sizes":[3,5,7,10],"page-size":e.pageSize,layout:"->,sizes, prev, pager, next, jumper ,total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],i=a(4806),o=a.n(i),r={name:"Role",data(){return{tableData:[],value:!0,total:0,pageSize:5,currentPage:1,searchKey:"",dialogFormVisible:!1,formLabelWidth:"120px",form:{name:"",nameZh:""}}},mounted(){this.getRoleList()},watch:{searchKey:{handler(){this.debouncedSearch()}}},methods:{async getRoleList(){const e=await this.$UserApi.getRoleListByPage({nameZh:this.searchKey,page:this.currentPage,size:this.pageSize});this.tableData=e.data,this.total=e.total},handleSizeChange(e){this.pageSize=e,this.getRoleList()},handleCurrentChange(e){this.currentPage=e,this.getRoleList()},handleSearch(){this.getRoleList()},debouncedSearch:o().debounce((function(){this.getRoleList()}),200),async changeStatus(e){await this.$UserApi.updateRole(e)},async handleSumit(){await this.$UserApi.addRole(this.form),this.$message({type:"success",message:"添加成功"}),this.dialogFormVisible=!1}}},s=r,c=a(1001),u=(0,c.Z)(s,l,n,!1,null,null,null),h=u.exports}}]);
//# sourceMappingURL=343.1be82731.js.map